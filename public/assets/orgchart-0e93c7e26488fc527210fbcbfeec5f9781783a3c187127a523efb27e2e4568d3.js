function init(e){st=new $jit.ST({injectInto:"infovis",duration:400,transition:$jit.Trans.Sine.easeInOut,orientation:"top",levelDistance:rowSpaceing,levelsToShow:1,constrained:!1,Navigation:{enable:!0,panning:"avoid nodes",zooming:0!=csstransform?10:!1},Events:{enable:!0,onMouseWheel:function(){$("#infovis-label .node").each(function(){this.style[csstransform]="scale("+st.canvas.scaleOffsetX+")"})}},Node:{height:nodeHeight,width:nodeWidth,type:"roundrect",color:"#1ab394",overridable:!0},Edge:{type:"bezier",lineWidth:3,color:"#00C39C",overridable:!0},onBeforeCompute:function(){},onAfterCompute:function(){},onCreateLabel:function(e,t){e.id=t.id,e.innerHTML="<a href='/employees/"+t.id+"'<i class='pull-right text-navy fa fa-eye' style='font-size:14px' alt='Profile'></i></a><div class='clearfix'></div><img style='margin-top:5px' class='img-circle' src='"+t.data.photo+"' height='65' /><br><strong>"+t.name+"</strong><br><span>"+t.data.workstation+"</span>",e.onclick=function(){st.onClick(t.id)};var o=e.style;o.width=nodeWidth-6+"px",o.height=nodeHeight-6+"px",o.cursor="pointer",o.color="#fff",o.fontSize="0.9em",o.textAlign="center",o.padding="3px",o.margin="3px 0px 0px 3px"},onPlaceLabel:function(e,t){var o=e.style;o.color="#000",t.selected?o.backgroundColor="#D0F7EF":o.backgroundColor="#fff"},onAfterPlotNode:function(e){var t=$jit.id(e.id);t&&(e.selected?($jit.id(e.id).style.backgroundColor="#39B39A",$jit.id(e.id).style.borderColor="#39B39A"):($jit.id(e.id).style.backgroundColor="",$jit.id(e.id).style.borderColor=""))},onBeforePlotNode:function(e){e.selected?e.data.$color="#39B39A":e.data.$color="#39B39A"},onBeforePlotLine:function(e){e.nodeFrom.selected&&e.nodeTo.selected?(e.data.$color="#ed5565",e.data.$lineWidth=3):(delete e.data.$color,delete e.data.$lineWidth)}}),st.loadJSON(e),st.compute(),st.geom.translate(new $jit.Complex(-200,0),"current"),st.onClick(st.root),$jit.ST.Plot.NodeTypes.implement({roundrect:{render:function(e,t){var o=e.pos.getc(!0),n=this.node,i=(e.data,n.width),a=n.height,r=this.getAlignedPos(o,i,a),s=t.getCtx();this.config.orientation;s.beginPath();var l=4,c=r.x,d=r.y,f=a,u=i;s.moveTo(c+l,d),s.lineTo(c+u-l,d),s.quadraticCurveTo(c+u,d,c+u,d+l),s.lineTo(c+u,d+f-l),s.quadraticCurveTo(c+u,d+f,c+u-l,d+f),s.lineTo(c+l,d+f),s.quadraticCurveTo(c,d+f,c,d+f-l),s.lineTo(c,d+l),s.quadraticCurveTo(c,d,c+l,d),s.fill()}}})}function getsupportedprop(e){for(var t=document.documentElement,o=0;o<e.length;o++)if("string"==typeof t.style[e[o]])return e[o];return!1}var labelType,useGradients,nativeTextSupport,animate;!function(){var e=navigator.userAgent,t=e.match(/iPhone/i)||e.match(/iPad/i),o=typeof HTMLCanvasElement,n="object"==o||"function"==o,i=n&&"function"==typeof document.createElement("canvas").getContext("2d").fillText;labelType=!n||i&&!t?"Native":"HTML",nativeTextSupport="Native"==labelType,useGradients=n,animate=!(t||!n)}();var Log={elem:!1,write:function(e){this.elem||(this.elem=document.getElementById("log")),this.elem.innerHTML=e,this.elem.style.left=500-this.elem.offsetWidth/2+"px"}};nodeHeight=158,nodeWidth=139,rowSpaceing=30,$(function(){$.get("/employees/organization-hash.json",function(e){csstransform=getsupportedprop(["transform","MozTransform","WebkitTransform","msTransform","OTransform"]),init(e)}),$("#zoomIn").on("click",function(e){e.preventDefault(),st.canvas.scale(1.1,1.1),$("#infovis-label .node").each(function(){this.style[csstransform]="scale("+st.canvas.scaleOffsetX+")"})}),$("#zoomOut").on("click",function(e){e.preventDefault(),st.canvas.scale(.909,.909),$("#infovis-label .node").each(function(){this.style[csstransform]="scale("+st.canvas.scaleOffsetX+")"})}),$("#all").on("click",function(e){e.preventDefault(),st.config.levelsToShow=100,st.config.constrained=!1,$("#"+st.clickedNode.id).click()}),$("#contract").on("click",function(e){e.preventDefault(),st.config.levelsToShow=1,st.config.constrained=!0,$("#"+st.clickedNode.id).click()})});